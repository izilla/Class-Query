/*
 * Class Query v0.1.5
 *
 * Creates media queries from .classquery- classes for elements with data-classquery attributes
 *
 * Copyright (c) 2013 Matt Stow
 *
 * http://mattstow.com
 *
 * Licensed under the MIT license
*/
;(function(){function J(k,l){var P=k.cssRules?k.cssRules:k.media,O,Q=[],m=P.length;for(var j=0;j<m;j++){O=P[j];if(l(O)){Q.push(O)}}return Q}function I(i){return J(i,function(j){if(!j.selectorText){return false}else{if(j.selectorText.indexOf(".classquery-")===0){return true}else{return false}}})}function s(j){var k=window.location,i=N.createElement("a");i.href=j;return i.hostname===k.hostname&&i.protocol===k.protocol}function w(i){return i.ownerNode.constructor===HTMLStyleElement}function L(i){return i.href&&s(i.href)}function r(){var O=N.styleSheets,k,m=O.length,j=0,l=[];for(j;j<m;j++){k=O[j];if(L(k)||w(k)){l.push(k)}}return l}var N=document,p=N.documentElement,v="classquery",u=N.querySelectorAll("[data-"+v+"]"),c=u.length;if(c===0){return}var G=r(),q=G.length,n;for(var C=0;C<q;C++){n=I(G[C])}if(!n||n.length===0){return}p.className+=" "+v+"-init";var e=v+"-id",d=n.length,g,M,h,K,a,H,f,B,F,E,t,b,D,o="";for(var A=0;A<c;A++){g=u[A];g.setAttribute("data-"+e,A);M=g.getAttribute("data-"+v).split(";");h=M.length;K=g.getAttribute("class")?"."+g.getAttribute("class").replace(/\s+/g,"."):"";a=g.getAttribute("id")?"#"+g.getAttribute("id"):"";for(var z=0;z<h;z++){H=M[z].split(",");f=H.length;for(var y=0;y<d;y++){for(var x=0;x<f;x++){H[x]=H[x].trim();if(x%2===1&&n[y].selectorText.match(H[x])){B=n[y].selectorText.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\*/g,"\\*").replace(/\^/g,"\\^").replace(/\$/g,"\\$")+" +?{";F=new RegExp(B,"g");t=B.match(/\:before/g)?":before":"";b=B.match(/\:after/g)?":after":"";E="[data-"+e+'="'+A+'"]'+K+a+t+b;o+="@media "+H[x-1]+"{"+E+" {"+n[y].cssText.replace(F,"")+"}\n"}}}}}D=N.createElement("style");D.appendChild(N.createTextNode(o));N.head.appendChild(D);p.className=p.className.replace(v+"-init",v+"-complete")})();